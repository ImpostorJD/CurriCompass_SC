<nav class="h-full flex flex-col relative transition-all md:z-0"
  [ngClass]="{'md:w-[18rem] z-20': panelToggled, 'md:w-[9rem] z-0': !panelToggled}">
  <div class="absolute w-full h-full -z-10">
    <div class="relative w-full h-full">
      <img src="../../../assets/bu-entraince.jpeg" class="w-[200vw] h-full absolute inset-0 object-cover md:block hidden"/>
    </div>
  </div>
  <div class="px-4 bg-green-700 md:bg-green-600 md:bg-clip-padding md:backdrop-filter md:backdrop-blur-md md:bg-opacity-60 flex flex-row justify-evenly items-center w-full h-[10%] border-b-slate-300 border-b-[0.17rem] rounded-br-md">
    <i class="material-symbols-outlined text-white cursor-pointer hover:bg-green-600 p-3 rounded-md"(click)="collapse()">
      @if(panelToggled) {
        arrow_back
      }@else{
        menu
      }
    </i>
    <img src = "../../../assets/CompassPreAdvisingNoBgAlt.png" class="h-[80%]"/>
    <span class="font-poppins text-white font-bold uppercase"
      [ngClass]="{'md:hidden': !panelToggled, 'md:inline': panelToggled}">
    CurriCompass
    </span>
  </div>
  <aside
    class="md:static md:before:hidden before:block bg-green-600 md:bg-clip-padding md:backdrop-filter md:backdrop-blur-md md:bg-opacity-60 md:flex-auto rounded-tr-md flex flex-col transition-all duration-[350ms] absolute h-[90%] bottom-0 w-full z-30"
    [ngClass]="{'right-0 before:absolute before:bg-black before:bg-opacity-35 before:h-full before:w-[100vw] before:-z-20': panelToggled, 'right-[100%] before:hidden': !panelToggled}"
  >
    <div class="flex-auto text-white flex flex-col overflow-auto z-30">
      @for (button of buttons; track $index) {
        <div class="relative group">
          <a
            *appRolesToRender="button.allowedRoles"
            [routerLink]="button.path"
            class="z-10 flex flex-row h-[3rem] p-4 gap-2 items-center my-1 rounded-r-2xl before:absolute before:h-full before:-z-10 hover:before:bg-green-600 transition-all"
            [ngClass]="{'justify-start before:-left-10 before:rounded-r-2xl before:w-full': panelToggled, 'md:justify-center before:rounded-[15rem] before:w-[50%]': !panelToggled}"
            routerLinkActive="before:bg-green-600 text-white"
            [routerLinkActiveOptions]="{exact: true}"
          >
            <i class="{{button.icon_type}}">{{button.icon}}</i>
            <span
              [ngClass]="{'md:inline': panelToggled, 'md:hidden': !panelToggled}"
            >{{button.name}}</span>
          </a>
          <div
            [ngClass]="{'md:group-hover:block' : !panelToggled}"
            class="w-0 h-0 hidden absolute top-[110%] right-[48%] border-l-[5px] border-l-transparent border-b-[10px] border-b-black border-r-[5px] border-r-transparent">
          </div>
          <div
            [ngClass]="{'md:group-hover:block' : !panelToggled}"
            class="hidden transition-all text-center absolute rounded-md bg-black min-w-[130px] w-auto h-auto text-white right-[50%] p-2 bottom-[-80%] translate-x-1/2 z-20 text-[0.66rem]">
            {{button.name}}
          </div>
        </div>
      }
    </div>
    <button
      class="m-1 bg-green-600 text-white flex h-10 justify-center items-center hover:bg-green-800 rounded-md border-emerald-800 hover:border-green-800 transition-all shadow-md shadow-green-950"
      (click)="logout()">
      <i class="material-symbols-outlined">logout</i>
      <span class="ml-1"
        [ngClass]="{'md:inline': panelToggled, 'md:hidden': !panelToggled}"
      >Sign out</span>
    </button>
  </aside>
</nav>
